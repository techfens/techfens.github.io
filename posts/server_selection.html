<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>万字踩坑日记之：国内外个人云服务器挑选指南及避坑 | TechFen's Blog</title><meta name="keywords" content="踩坑日记,服务器"><meta name="author" content="TechFens"><meta name="copyright" content="TechFens"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="写在前面由于个人学习和工作的原因，折腾过不少服务器，既刷过各种矿渣路由器，也整炸掉过几千块钱的物理机，但目前来说，使用最多的还是由各大 IDC 厂商提供的云服务器。 云服务器最大的优点在于稳定，由专业人员集中运维，但这也是致命的缺点之一，毕竟服务器的控制权都在别人手里，买的时候一不留神就经常踩坑， 由于国情环境的特殊，国内与国外的云服务器生态差别相当大，因此本文部分内容会对其分开进行介绍。本文区别">
<meta property="og:type" content="article">
<meta property="og:title" content="万字踩坑日记之：国内外个人云服务器挑选指南及避坑">
<meta property="og:url" content="https://techfens.com/posts/server_selection.html">
<meta property="og:site_name" content="TechFen&#39;s Blog">
<meta property="og:description" content="写在前面由于个人学习和工作的原因，折腾过不少服务器，既刷过各种矿渣路由器，也整炸掉过几千块钱的物理机，但目前来说，使用最多的还是由各大 IDC 厂商提供的云服务器。 云服务器最大的优点在于稳定，由专业人员集中运维，但这也是致命的缺点之一，毕竟服务器的控制权都在别人手里，买的时候一不留神就经常踩坑， 由于国情环境的特殊，国内与国外的云服务器生态差别相当大，因此本文部分内容会对其分开进行介绍。本文区别">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://img.techfens.fun/img/asdasfsfsf.jfif">
<meta property="article:published_time" content="2021-09-21T10:55:05.000Z">
<meta property="article:modified_time" content="2022-08-04T07:41:10.634Z">
<meta property="article:author" content="TechFens">
<meta property="article:tag" content="踩坑日记">
<meta property="article:tag" content="服务器">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://img.techfens.fun/img/asdasfsfsf.jfif"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://techfens.com/posts/server_selection"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?<meta name="baidu-site-verification" content="code-Kk1l97MfxO" />";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: TechFens","link":"链接: ","source":"来源: TechFen's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://fastly.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '万字踩坑日记之：国内外个人云服务器挑选指南及避坑',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-08-04 15:41:10'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20220320231057.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="http://pan.techfens.com"><i class="fa-fw fas fa-cloud-download-alt"></i><span> 网盘</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-fw fa fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('http://img.techfens.fun/img/20210927121200.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">TechFen's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="http://pan.techfens.com"><i class="fa-fw fas fa-cloud-download-alt"></i><span> 网盘</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-fw fa fa-user"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">万字踩坑日记之：国内外个人云服务器挑选指南及避坑</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-09-21T10:55:05.000Z" title="发表于 2021-09-21 18:55:05">2021-09-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-08-04T07:41:10.634Z" title="更新于 2022-08-04 15:41:10">2022-08-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4/">服务器运维</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">14k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>42分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="万字踩坑日记之：国内外个人云服务器挑选指南及避坑"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>由于个人学习和工作的原因，折腾过不少服务器，既刷过各种矿渣路由器，也整炸掉过几千块钱的物理机，但目前来说，使用最多的还是由各大 IDC 厂商提供的云服务器。</p>
<p>云服务器最大的优点在于稳定，由专业人员集中运维，但这也是致命的缺点之一，毕竟服务器的控制权都在别人手里，买的时候一不留神就经常踩坑，</p>
<p>由于国情环境的特殊，国内与国外的云服务器生态差别相当大，因此本文部分内容会对其分开进行介绍。<strong>本文区别国内外服务器的原则是是否需要备案，港澳台乃我国一贯领土，勿杠！</strong></p>
<p>本文主要介绍的还是主要还是以 VPS（Virtual Private Server 虚拟专用服务器）有关的内容。像独服，FPGA，边缘计算等内容就不在本文中细说。</p>
<p>本文文末<strong>有</strong>推荐的IDC厂商介绍，但是仅作为个人推荐，无恰饭<del>（其实我也想恰，可惜没有）</del></p>
<h1 id="明确需求"><a href="#明确需求" class="headerlink" title="明确需求"></a>明确需求</h1><p>以下的选择都是作为个人或者小型团队的出发点分析的，并不适用于大型项目。</p>
<p>说白了，<strong>只适用于性价比是第一位的选择。</strong></p>
<h2 id="项目类型"><a href="#项目类型" class="headerlink" title="项目类型"></a>项目类型</h2><p>一台服务器可以做的事情非常多，性能嘛当然是越高越好，但是由于现实因素的影响（钱包），很难做到全都要。</p>
<p>首先你要问问自己，<strong>你为什么需要一台服务器？你要拿服务器干什么？</strong></p>
<p>如果你只是想挂一个小脚本，你大概率不需要买服务器。你完全可以白嫖各大厂商免费提供的云函数，或者直接在路由器以及虚拟机中运行。</p>
<p>如果你只是想做一个小网站，你也不一定需要买一台服务器。廉价的虚拟主机，甚至是各种免费的静态托管，<code>Github</code>，<code>Heroku</code>，<code>Vercel</code>，<code>Leancloud</code>等云产品都完全可以满足你的需求。</p>
<p>如果你想用来跑机器学习，那么你应该去买专用的显卡或者租用专业的工作站，服务器并不能胜任你的需求，或者换句话说，你应该是没有这么多钱的。</p>
<p>如果你只是用来挂个游戏，那么隔壁没有独立IP地址的挂机宝会更适合你，不仅便宜而且配置高。</p>
<p>……</p>
<p>是的，以上的内容云服务器都可以胜任，但对你来说都不一定是最优解。那么拥有一台云服务器对你来说，最大的优点是什么？</p>
<p><strong>最大的优点，是拥有自己独立的IP地址，以及完整的服务控制权限。</strong></p>
<h2 id="云服务器种类"><a href="#云服务器种类" class="headerlink" title="云服务器种类"></a>云服务器种类</h2><p>主要讨论个人使用的服务器会接触到的种类。大部分都是以经典云为主。（也就是所谓的 VPS ）</p>
<h3 id="轻量应用服务器"><a href="#轻量应用服务器" class="headerlink" title="轻量应用服务器"></a>轻量应用服务器</h3><p>国内云不知道什么时候衍生出的云产品，<strong>面向单机使用环境，基本无法升降配</strong>。共享性能，开箱即用，价格感动人心。</p>
<p>个人服务器选择的话，如果没有特殊需求，轻量可以首选。</p>
<p>缺点是拓展性较弱，基本上告别了游戏服务器和其他各种高负载的服务器应用场景。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20210926211339.png"></p>
<p>上图是我在腾讯云开的一台轻量，性价比非常高，2核心，4GB内存，8Mpbs带宽的配置只需要 368 / 4年 ，算是十分极限的价格了。（当然是活动价，可遇不可求）。同等配置的经典云怕是要翻10倍价起步。良心云yyds！</p>
<h3 id="经典云服务器"><a href="#经典云服务器" class="headerlink" title="经典云服务器"></a>经典云服务器</h3><p>与上方的轻量应用服务器差距不大，拓展性稍微更强，稳定性更强，升降配更加具有拓展性，是各大 IDC 厂商主打的产品。</p>
<p>一般最大的区别在于，<strong>具有100%的性能释放，独享带宽</strong>，对突发任务的处理能力更强一点。</p>
<p>由于国外几乎没有轻量应用服务器这种奇怪的存在，所以国外 IDC 厂商推出的经典云，大概就是国内轻量的水平。</p>
<h3 id="弹性伸缩服务器"><a href="#弹性伸缩服务器" class="headerlink" title="弹性伸缩服务器"></a>弹性伸缩服务器</h3><p>可以根据负载动态调整配置的云服务器，对于个人使用而言，性价比不高。除非你需要做小程序，或者开发APP等。</p>
<h3 id="NAT服务器"><a href="#NAT服务器" class="headerlink" title="NAT服务器"></a>NAT服务器</h3><p>专门用于跑流量的服务器，相比起普通服务器几兆的小水管，动辄几百上千兆的 NAT 服务器就显得十分高性价比。</p>
<p><strong>但是 NAT 服务器一般只开放个别端口给你使用，你并没有服务器的完整控制权限，当然也不能拿来做网站</strong>。</p>
<p>一般是用于内网穿透，文件传输等流量业务。</p>
<h3 id="按时计费服务器"><a href="#按时计费服务器" class="headerlink" title="按时计费服务器"></a>按时计费服务器</h3><p>一般用于搭建测试环境的时候使用。性价比不是很高，但是好处是不需要的时候可以关停，不会继续计费。</p>
<h3 id="裸金属服务器"><a href="#裸金属服务器" class="headerlink" title="裸金属服务器"></a>裸金属服务器</h3><p>不是脱光衣服的服务器。是物理独立服务器+云的结合产品。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20210923222242.png"></p>
<p>如果说上面虚拟化的云服务器是一栋公寓，大家公用一套资源，那么裸金属服务器就独栋别墅。晚上再也不怕邻居蹦迪睡不着觉了。</p>
<p>一般用于游戏服务器等高负载高I/O场景。性价比不一定最高，但是一定是最稳定。</p>
<h3 id="GPU服务器"><a href="#GPU服务器" class="headerlink" title="GPU服务器"></a>GPU服务器</h3><p>用于深度学习，人脸识别等。科研或工作室专用，个人用户价格劝退。(但是偶尔能白嫖)</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/image-20210923223251806.png" alt="image-20210923223251806"></p>
<h1 id="配置选择"><a href="#配置选择" class="headerlink" title="配置选择"></a>配置选择</h1><h2 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h2><p>一般来说，服务器追求稳定，CPU的主频不会太高，因此不同厂家的CPU性能的差异在同价位来说，基本上大差不大，如果是个人使用的服务器，基本不用刻意考虑CPU的具体型号。</p>
<p>一般对CPU的选择，是核心数。比如良心云的标准配置<code>1C2H</code>，指的是单核双线程。这样的配置对于个人服务器来说其实也是够用的。</p>
<p>对于跑<code>Windows server</code>的服务器，个人建议CPU在2个核心以上。</p>
<p>得益于虚拟化的技术，实际上大部分IDC厂商都存在超售行为（部分甚至很严重），<strong>一般没有说明性能独享的云服务器，CPU性能都是共享的。</strong>共享性能的服务器是不允许你长期跑高负载的，如果你有长期跑高负载服务的预项，请着重斟酌此项。</p>
<p>目前占据主要市场的还是 kvm 虚拟化的云服务器，此虚拟化方式的机子，内存和硬盘空间都不能超售，<strong>但是可以超售cpu。</strong></p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/image-20210926213733167.png" alt="image-20210926213733167"></p>
<p>上图是我一个专门用于刷豆子（青龙面板）的服务器，配置是 1c.2g.1m ，大概挂载十个账号左右。可以看出即便是如此低配置的机器，对于运行小脚本的性能还是有不少溢出的。偶尔有CPU占用100%的情况，这时候考验的就是服务器对突发性能的要求了，但基本不影响使用。</p>
<h2 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h2><p>服务器的内存基本都是ECC内存条，性能不高，但也是胜在稳定。如果是个人使用的服务器，基本不用刻意考虑内存的具体型号与速度。</p>
<p>一般对内存的选择，还是集中在容量上。理论上当然是越大越好，但那毕竟要加钱嘛。Linux本身对于内存的需求是很低的，但是低于512M内存的服务器就不建议买了，毕竟跑一个docker 或者其他服务就基本占满了。</p>
<p>对于跑<code>Windows server</code>的服务器，个人建议内存在4GB以上。</p>
<p>值得注意的是，很多国外的服务器厂商都喜欢设置SWAP内存，<strong>SWAP内存是不算在内存中的。</strong>一般情况下并不需要用到，除非你的内存很小真的不够用。</p>
<p>容量就是王道，内存没别的，越大越好越大越好越大越好！！！</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/image-20210926213524465.png" alt="image-20210926213524465"></p>
<p>上图是我用于搭建某网盘列表程序的服务器，配置是 1c.1g.1m 。大概日均 4K 左右的 PV ，还是没有什么压力的。</p>
<h2 id="硬盘I-O"><a href="#硬盘I-O" class="headerlink" title="硬盘I/O"></a>硬盘I/O</h2><p>一般的常规的云服务器提供的硬盘都不大，正常情况下硬盘也不会用满。所以硬盘的容量大小不用太纠结。</p>
<p>服务器的硬盘大部分都是用来安装应用服务以及存放日志的，<strong>服务器的硬盘不是给你用来当网盘用的，尤其是国内的服务器</strong>，静态的资源尽量不要往上面丢，可以选择用对象存储或CDN。</p>
<p><strong>硬盘的随机读写能力要比连续读写能力重要得多</strong>，所以要谨慎留意是否买到了“石头盘”机器，光有容量但是读写性能极差的垃圾服务器依旧是大有其在，国外服务器此坑相对较多。</p>
<p>基本所有的IDC厂商对硬盘都有冗余策略，有条件的大厂都使用RAID10作为标配。<strong>这不是一个加分项，而是一个必备项</strong>，如果你购买的服务器不支持硬盘冗余和快照灾备，直接退款就完事。</p>
<table>
<thead>
<tr>
<th>RAID级别</th>
<th>最少磁盘要求</th>
<th>关键优点</th>
<th>关键缺点</th>
<th>实际应用场景</th>
</tr>
</thead>
<tbody><tr>
<td>RAID0</td>
<td>1块</td>
<td>读写速度快</td>
<td>没有任何冗余</td>
<td>MySQL Slave(数据库的从库)，集群的节点RS</td>
</tr>
<tr>
<td>RAID1</td>
<td>2块（只能）</td>
<td>100%冗余，镜像</td>
<td>读写性能一般，成本高</td>
<td>单独的，数据很重要，且不能宕机的业务，监控，系统盘</td>
</tr>
<tr>
<td>RAID5</td>
<td>3块</td>
<td>具有一定性能和冗余，可以坏一块盘</td>
<td>写入性能不高</td>
<td>一般的业务都可以用</td>
</tr>
<tr>
<td>RAID10</td>
<td>4块</td>
<td>读写速度很快，100%冗余</td>
<td>成本高</td>
<td>性能和冗余要求很好的业务。数据库主库和存储的主节点。</td>
</tr>
</tbody></table>
<p>不出意外，没有特殊说明硬盘也是共享资源，也是不能持续高负载I/O的，甚至很多服务器厂商还会给你的连续读写设限，防止你乱来。</p>
<p>也有不少厂商系统盘与数据盘是隔离的，这不一定是个加分项。安全性并没有多大提升，但是体验大概率是下降的。</p>
<h2 id="带宽"><a href="#带宽" class="headerlink" title="带宽"></a>带宽</h2><p>对于服务器的带宽，很多人都有很大的误会。</p>
<p>首先，服务器厂商提供的带宽，基本都是以 Mbps 计算的。比如 1M 的带宽，换算成实际体现是 128KB/s。</p>
<p>你可能以为服务器的带宽都是很大的，毕竟现在随便一个网页，各种图片视频都是几十兆起步，你甚至可能产生过买一台服务器当自己的云盘的打算。</p>
<p>但很不幸的是，在国内你会发现大部分你能买得起的服务器带宽都在 10M 以内，甚至很大部分都是 1M，2M 的。带宽不仅低的离谱，甚至是死贵的要命，甚至可以用寸M寸金来形容了。这么低的带宽，真的能用吗？</p>
<p>实际上，如果你是做网站的，你会发现哪怕是 1M 的小水管，优化做的好，也足以支持日均上万的IP，十万的PV。<strong>服务器是运算中心而不是数据中心</strong>，服务器只负责输出核心的内容即可，内容和资源由对象存储和 CDN 进行分发。这也是为什么基本所有的大型项目都要求前后端分离的原因，因为服务器的带宽真的很值钱。</p>
<p>当然也有专门用于跑流量服务的 NAT 服务器。这就不属于本文介绍的内容了，NAT 服务器拥有很高的带宽，但是一般只开放个别端口给你使用，你并没有整台服务器的完整控制权限。</p>
<p>在大多数非流量业务中，<strong>时延，抖动，丢包等指标的重要性都远远高于带宽</strong>，这些都与带宽无任何直接联系，这就是为什么尽管国内的服务器如此拉跨，带宽如此低，我们也不得不选择国内服务器的原因。</p>
<p>至于国外服务器带宽，一般都给的比较大，但是与线路挂钩，水就深了。我会在后面详细介绍。</p>
<h2 id="高防"><a href="#高防" class="headerlink" title="高防"></a>高防</h2><p>个人使用的云服务器，无论是国内还是国外，我认为都没有上高防的必要。</p>
<p>对于国内云，哪怕是裸奔都不怕。毕竟自有国情在此，国外的IP大部分都已经被墙挡干净了，国内也没多少人敢用实名的IP来攻击你。真被盯上了，你那几十一百个G的防御也脆的跟纸一样。</p>
<p>高防基本上都是恰国内中小企业烂钱的，自己手里有黑名单捂着，不买高防不买清洗机那便是”死得其所”，典型的有今年八月初上线一天的《弈剑行》在被ACCN攻击勒索后，直接被迫停服下线的血压行为。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20210923181934.png" alt="《弈剑行》公开的勒索邮件，攻击者索要一万五千人民币"></p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/359b033b5bb5c9ead23345bbf93a47083bf3b3b6.jpeg" alt="img"></p>
<p>这么嚣张肆无忌惮的攻击，你要说背后没有厂商默许，我是不信的。毕竟是块大蛋糕，如果你没有做游戏服务器的打算，建议直接躺平。</p>
<p>至于国外云，选择就更多了。首先是不同国家的机房本身抗压能力就不一样，比如韩国的机房KT等，本身就自带百G的抗压能力。而香港机房的小水管，基本都是一打就死，甚至还会被机房永久拉黑。</p>
<p>我国的网络安全建设与国外发达地区相比，还是有很大的差距的。比如像<code>Cloudflare</code>这样的大爹，免费计划就可以无限防御 DDoS 攻击，根本不和你算什么流量清洗费用。几个T打过来那都是小场面，家常便饭。<strong>CF能够承受比有史以来最庞大DDos攻击还要强11倍的攻击</strong>。扛D的同时还可以隐藏自己的真实 IP，甚至还自带CDN，全球体验都很好（墙内除外）。</p>
<p>Cloudflare：五秒盾前，众生平等</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/13530319-447f39b82af60eb7.png" alt="五秒盾前，众生平等"></p>
<p>网络攻击不仅仅只有DDOS一种，这世界上没有单靠硬件就能完全防护的机器。对个人服务器来说，相比起被D死的风险，我认为更加要注重服务器的数据安全。</p>
<h1 id="踩坑雷点"><a href="#踩坑雷点" class="headerlink" title="踩坑雷点"></a>踩坑雷点</h1><h2 id="备案"><a href="#备案" class="headerlink" title="备案"></a>备案</h2><p>备案是国内云服务器绕不开的一个坑。</p>
<p>在国内，不备案的服务器也是可以使用的，但是一些关键的端口会被禁用，比如<code>80</code>,<code>443</code>等。<strong>不备案的服务器不能被域名解析，也无法搭设网站服务。</strong>但是其他的服务是可以正常使用的，如果你没有做网站的打算，可以不备案。</p>
<p>当然了，备案的好处多多，可以白嫖免费的CDN，也可以有更高的权重，就是不能拿来干坏事。</p>
<p>国外的服务器没有限制，无需备案，甚至可以不用实名购买。实际上对于个人服务器来说，香港，韩国等较近区域的服务器与国内服务器的体验是差距不大的，延迟都很低。</p>
<h2 id="背书"><a href="#背书" class="headerlink" title="背书"></a>背书</h2><p>如果是没有大机房背书的 IDC ，保不准会出现什么提桶跑路的经历（亲身体会）</p>
<p>一般有名的头部云服务商自然是问题不大，但是也有不少臭鱼烂虾，套了个皮就搁那割韭菜。</p>
<p>下面是一些国内外已经实锤跑路的 IDC 厂商的一些数据（截至至2021-09）</p>
<div class="hide-toggle"><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>国内外跑路 IDC 厂商</span></div>
    <div class="hide-content"><p>inlicloud (inli.cloud) 注：引力主机已经停运，跑路!</p>
<p>习梦云 （xmxm.net）注：习梦云商家疑似跑路，机器已失联。</p>
<p>前海云（szqhcloud.com）注：官方已经正式发布停运公告，快去取数据！</p>
<p>combcloud (combcloud.net)  注：证实官网打不开，跑路！</p>
<p>彩虹数据 (chshuju.com) 注：证实官网打不开，跑路！</p>
<p>戈登云 (godeng.cn) 注：证实官网打不开，跑路！</p>
<p>桔子vps (vpszi.com) 注：证实官网打不开，跑路！</p>
<p>比特云 (btcvps.me) 注：证实官网打不开，跑路！</p>
<p>老六云 (l6ee.com) 注：证实官网打不开，跑路！</p>
<p>奇维云 (kiver.cn) 注：证实官网打不开，跑路！</p>
<p>vosent (vosent.com) 注：官网公告停运业务交割，已跑路!</p>
<p>阁天互联 (xebvr.com) 注：证实官网打不开，跑路！</p>
<p>Crastar (crastar.cc) 注：证实官网打不开，跑路！</p>
<p>霓云主机 (rmrf.cloud) 注：证实官网打不开，跑路！</p>
<p>mansora (mansora.co) 注：官网公告全线停运退款，有机器的赶紧联系吧!</p>
<p>樊云 (fanyun.com) 注：商家已经失联，路路!</p>
<p>迅勇科技 (xunyong.net) 注：证实官网打不开，跑路！</p>
<p>啤啤云 (ppyvps.com) 注：证实官网打不开，跑路！</p>
<p>excloud (excloud.net) 注：证实官网打不开，跑路！</p>
<p>kvmloc (kvmloc.com) 注：证实官网打不开，跑路！</p>
<p>wehostfast (wehostfast.com) 注：证实官网打不开，跑路！</p>
<p>ownweb (ownweb.co.uk) 注：直接更换了域名和平台，跑路!</p>
<p>lvps (lvps.net) 注：证实官网打不开，跑路！</p>
<p>绿洲云 (lzhost.com) 注：证实官网打不开，跑路！</p>
<p>初忆云 (chuyivps.com) 注：证实官网打不开，跑路！</p>
<p>汇速云 （huisuyun.cn) 注：证实官网打不开，跑路！</p>
<p>盛星网络 (shxncloud.cn) 注：证实官网打不开，跑路！</p>
<p>科云 (kvmserver.net) 注：证实官网打不开，跑路！</p>
<p>思云数据 (idc.ee) 注：证实官网打不开，跑路！</p>
<p>孤狼云 (16idc.cn) 注：证实官网打不开，跑路！</p>
<p>奶兔云 (naituyun.com) 注：证实官网打不开，跑路！</p>
<p>hklayer (hklayer.com) 注：证实官网打不开，跑路！</p>
<p>nat.bz (nat.bz) 注：证实官网打不开，跑路！</p>
<p>情画数据 (633idc.com) 注：证实官网打不开，跑路！</p>
<p>readydedis (readydedis.com) 注：证实官网打不开，跑路！</p>
<p>Conoov (conoov.com) 注：证实官网打不开，跑路！</p>
<p>快快数据 （kuaikuaicdn.com） 注：证实官网打不开，跑路！</p>
<p>捷睿数据 （jrvps.com）注：证实官网打不开，跑路！</p>
<p>源云主机 (wenfast.com) 注：已经跑路！</p>
</div></div>

<p>国内的好歹还能走走法律途径，碰到国外跑路拔网线的，就只能下楼买个苹果降血压了。</p>
<p>如果你不清楚这家 IDC 厂商背后有没有大机房背书，可以 google 一下。<strong>（别百度了，真找不到）</strong></p>
<h2 id="优惠"><a href="#优惠" class="headerlink" title="优惠"></a>优惠</h2><p>国内各大 IDC 厂商的打架力度相当大，对新用户，个人以及学生可以说基本都是赔钱赚吆喝。毕竟自有国情在此，根本不怕你不用。<strong>（但是续费会有大坑）</strong></p>
<p>尽量不要买小厂子的服务器，毕竟买国内的云很大程度就是奔着完善的售后去的。小厂子的价钱并没有低多少，但是偶尔有奇奇怪怪的坑把你整的血压极高。</p>
<p><strong>不要相信国内的所谓的免费服务器</strong>，点名批评某丰云，此类企业就是为了套你的个人信息罢了。所谓的免费，就是让你为了那可怜的几天免费续用，写各种臭鱼烂虾软文推广。<strong>反正是免费的，一言不合就删数据，网站被跳转广告，性能还极差。</strong>对国内这些玩意大家心里都明白，免费的才是最贵的。下次看到类似的推广建议直接拉黑。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20210927122622.png"></p>
<p>国外的 IDC 厂商打架也很厉害，但与国内的垄断情势有所不同，一般都比较少新购优惠，<strong>优惠都是在各大节日放出，比如黑五，圣诞节等等，以优惠机型或者优惠码的形式上架，需要提前蹲点。</strong>一般国外服务器的续费价格都是延续首购的。甚至很多还能白嫖，比如 IBM，甲骨文，谷歌云等。（国外的白嫖云相对良心，但其实也差不多，比如甲骨文白嫖机那只有 1/8 核的性能着实把我震惊了）</p>
<p>此外，推广返利以及充值返利也是国外IDC厂商促销的主要手段。但考虑到国外的服务器售后麻烦，一般不推荐上头无脑梭哈个几年。</p>
<h2 id="付款"><a href="#付款" class="headerlink" title="付款"></a>付款</h2><p>国内没啥说的，微信支付宝银行卡。</p>
<p>国外很多服务器厂商不支持微信和支付宝，如果你想购买，建议提前申请一个 PayPal。（当然现在很多厂商也跟进了）</p>
<p>有些厂商很鸡贼，偷偷给你开了自动续费，尤其是对于用 PayPal或信用卡购买的，有时候开了自动续费都不知道怎么关，建议购买的时候分辨清楚。</p>
<p><strong>国外的服务器商即使支持支付宝或者微信购买也不要用，有能力的还是上 PayPal 。</strong>如果是涉及到退款，开票等操作，支付宝和微信人家不认！人家不认！！！可能无法退款！！不要为了一时简便就给自己的售后挖坑！！</p>
<p>（也不要用比特币支付，除非你买台服务器就不是为了干好事的，虽然保证了全匿名操作，但同时也会对你的售后带来极度不便）</p>
<h2 id="售后"><a href="#售后" class="headerlink" title="售后"></a>售后</h2><p>国内大厂都不错，出了问题直接加客服，逢年过节还有节日问候，送点小月饼啥的。</p>
<p>国外一般都是靠发工单和邮件处理，血压高的时候建议下楼买个苹果吃，因为急也没用。另外请收起你的QQ邮箱和蹩脚的中式英语，百度翻译一下不是什么难事，起码要让人家看明白。</p>
<p>另外国外很多服务器厂家都不支持全天候服务的（ 需要额外购买），甚至很多都是只有周一到周五上班时间才理你。</p>
<h2 id="抗投诉"><a href="#抗投诉" class="headerlink" title="抗投诉"></a>抗投诉</h2><p>首先，这里一般的投诉指的是同行互踩，或者是部分想干碎你的人。他们可以用个人的形式通过 ip 投诉到机房，这属于一般投诉。</p>
<p><strong>国内因为有备案的存在，投诉的意义几乎为0，可以直接忽略。</strong>因为不合规的根本连备案都过不了。能过了备案的，自己确实身正不怕影子斜的，无论怎么投诉都对你没影响。</p>
<p>但是国外的才不管你这么多，收到投诉就给你拔网线，这可比直接黑了你的站方便多了。下面简单介绍一下各类海外抗投诉服务器，主要还是分布在亚洲、美洲、欧洲。</p>
<p>1、亚洲抗投诉服务器机房<br>亚洲的机房很多，但是真正做到抗投诉的机房只有马来西亚机房，如果用户针对的群体是在国内，可以选择马来西亚服务器。</p>
<p>2、美洲抗投诉服务器机房<br>美洲机房中最为代表性的为美国机房，这也是国内市场中比较常见的机房，由于美国服务器带宽比较大，而且内容限制比较少，很多人都喜欢租用美国服务器进行仿牌网站等搭建仿牌网站。美国硅谷机房位于美国互联网高速发达的城市洛杉矶，该机房不但抗投诉能力强，而且带宽充足、不限流量、访问速度快。</p>
<p>3、欧洲抗投诉服务器机房<br>欧洲地区可供选择的抗投诉服务器比较多的，如荷兰服务器、瑞典服务器、立陶宛服务器、拉脱维亚服务器等都可以选择。</p>
<p>还有一个问题想和大家说清楚：那就是根本不存在有些商家所吹嘘的完全抗投诉的机房，有些服务商在宣传自己的仿牌服务器或抗投诉服务器时，宣城自己“完全不怕投诉，任何的投诉都不予理会”，这个是不存在的。只能是选择相对抗投诉能力强，效果好的服务器来租用。</p>
<h2 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h2><p>IP地址也是一个巨大的坑。（国内服务器依然可以忽略本部分）</p>
<h3 id="被墙IP"><a href="#被墙IP" class="headerlink" title="被墙IP"></a>被墙IP</h3><p><strong>部分IP地址由于上一任机主的滥用，以及被列入墙的黑名单了。</strong>此时你买到的服务器就是个石头，因为你根本连接不上，用来做网站国内的用户也无法访问。</p>
<p>最简单的解决办法是退款。如果没有办法退款，可以申请更换IP（一般不免费），最差的打算，可能就要套一层 CF 了。</p>
<h3 id="非固定IP"><a href="#非固定IP" class="headerlink" title="非固定IP"></a>非固定IP</h3><p>部分国外服务器厂商提供给你服务器的 IP 不是固定的，很勾八恶心。如果不慎已经踩了坑，很可能要做好长期动态解析的准备。<em>DDNS</em>（Dynamic Domain Name Server，动态域名服务）</p>
<h3 id="单IPV6地址"><a href="#单IPV6地址" class="headerlink" title="单IPV6地址"></a>单IPV6地址</h3><p>有些厂商提供 IPv6 Only 的选项，或许会便宜一点，但是目前来说 IPV6 的生态支持仍然不完善，IPV4 对于大部分应用场景仍然是刚性需求。千万不要为了省一点钱就丢弃IPv4地址。</p>
<h2 id="系统镜像"><a href="#系统镜像" class="headerlink" title="系统镜像"></a>系统镜像</h2><p>所有 IDC 厂商都支持自己选择镜像安装系统，但是镜像不一定全面，不少国外的 IDC 厂商只提供4~5个镜像使用，如果你对系统版本和环境比较挑剔，请记得买之前询问一下支持安装的系统。</p>
<p><code>Windows Server</code>对硬件有硬性要求，明面上一般都是只受内存限制，实际上CPU和带宽也是限制条件。如果你的带宽少于 3M，远程桌面会卡的你怀疑人生，甚至直接无法使用。</p>
<h2 id="拥塞处理"><a href="#拥塞处理" class="headerlink" title="拥塞处理"></a>拥塞处理</h2><p>主要用于国内服务器出海，或者出海服务器回国线路的丢包问题。国内服务器如果面向国内使用，可以不做额外配置。</p>
<p>如果你购买国外的云服务器发现速度很慢，或许是拥塞问题处理的问题。建议切换算法为 <code>BBR</code> 或 <code>BBR 的衍生版本</code>。</p>
<p>请注意，<strong>此操作涉及系统内核层面，乱改会出事！</strong></p>
<h3 id="Cubic"><a href="#Cubic" class="headerlink" title="Cubic"></a>Cubic</h3><p>TCP 拥塞控制算法已经持续发展了30多年，主流的拥塞控制算法是基于丢包的，即它们将数据包丢失作为拥塞信号。例如，Linux的默认TCP算法Cubic在遇到数据包丢失时将其拥塞窗口降低了30％。</p>
<p>Cubic  是传统的 TCP 协议拥塞控制算法。<strong>并不是说传统就不好用</strong>，而是需要视网络实际情况使用。此算法在丢包较少的环境下表现是很不错的，但是如果碰到了一些国外的垃圾机器，网络线路也垃圾，那么使用没有优化过 Cubic 算法那将会丢包丢到你怀疑人生。</p>
<h3 id="BBR"><a href="#BBR" class="headerlink" title="BBR"></a>BBR</h3><p>在某些情况下，基于丢包的TCP算法效果不佳。例如，在浅缓冲区中，数据包丢失可能被误解为网络拥塞，从而导致吞吐量降低和网络利用率降低。另一方面，在较深的缓冲区中，数据包通常要花很长时间才能填满缓冲区。这将导致较高的网络延迟，这称为<strong>缓冲膨胀问题</strong>。</p>
<p>为了解决此类问题，Google在2016年提出了BBR。BBR不会使用数据包丢失作为拥塞信号，而是根据观察到的带宽和延迟值来调节其流量。具体来说，BBR将其传输中的数据包数量限制为时延带宽积（BDP）的倍数。此外，BBR还使用 pacing来控制数据包之间的间隔。</p>
<p>重点：</p>
<ul>
<li>瓶颈缓冲区大小和时延带宽积（BDP）之间的差异通常指示BBR何时运行良好。在较大的BDP和较浅的缓冲区大小下，BBR可获得更高的吞吐量。</li>
<li><strong>与Cubic相比，BBR可能导致100倍的数据包重传。</strong></li>
<li>BBR和Cubic之间的不公平性取决于瓶颈缓冲区的大小—如果缓冲区大小较小（10KB），则BBR可以获取总带宽的90％以上；具有较大的缓冲区大小（10MB），Cubic可获得大约80％的总带宽。</li>
</ul>
<p>虽然BBR是为了解决基于丢包的拥塞控制算法的某些问题而提出的，但是这并不意味着在所有的情况下，BBR都比基于丢包的拥塞控制算法有更好的性能。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20210923230803.png"></p>
<p>橙色节点表示 BBR 获得更高吞吐量的实例，而蓝色节点代表 Cubic 获得更高吞吐量的实例。图中可以观察到，瓶颈缓冲区大小和 BDP 之间的相对差异通常决定了 BBR 何时运行良好-在较小的 BDP 和较深的缓冲区大小下，Cubic 可获得较高的吞吐量，而在较大的BDP和较浅的缓冲区大小下，BBR 可获得较高的吞吐量。更高的产量。</p>
<p>也就是 BBR 与 CDP 呈现正相关，与缓冲区大小呈现负相关，而 Cubic 恰恰相反。</p>
<p>BBR 导致的数据包重传比 Cubic 的重传100倍。这表明 BBR 是以浅缓冲区中的高数据包重传为代价提高吞吐量。因此，<strong>如果传递的内容对丢包敏感，那么 BBR 可能不是一个好选择</strong>。</p>
<p>此外 BBR 也有其他衍生版本，比如 BBR2 , BBR Plus 等等。</p>
<h3 id="LotServer（锐速）"><a href="#LotServer（锐速）" class="headerlink" title="LotServer（锐速）"></a>LotServer（锐速）</h3><p>LotServer，一款TCP单边加速工具，锐速是其在国内的马甲。解决了之前91云版本的锐速可能因为破解验证机制不完整带来的断流问题。</p>
<p>适用于Debian, Ubuntu和CentOS，由于其对内核版本有要求，自行安装更换为支持的3.16.0.4或者3.2.0.4内核，其余版本的Linux，我不怎么用，不太熟悉支持的内核版本。</p>
<p>Linux支持的内核列表：<a target="_blank" rel="noopener" href="https://github.com/0oVicero0/serverSpeeder_kernel/blob/master/serverSpeeder.txt">https://github.com/0oVicero0/serverSpeeder_kernel/blob/master/serverSpeeder.txt</a></p>
<p>此脚本不支持OpenVZ虚拟化的VPS。貌似以及不更新很久了，不推荐使用。</p>
<h2 id="虚拟化架构"><a href="#虚拟化架构" class="headerlink" title="虚拟化架构"></a>虚拟化架构</h2><p>虚拟化架构在一定程度上会影响硬件性能的发挥。如果你对硬件没有什么兴趣，那不用过多深入了解，<strong>明白各不同虚拟化架构服务器带来的坑就可以了</strong>。</p>
<p>虚拟化是云计算的基础。简单的说，虚拟化使得在一台物理的服务器上可以跑多台虚拟机，虚拟机共享物理机的 CPU、内存、IO 硬件资源，但逻辑上虚拟机之间是相互隔离的。</p>
<p>物理机我们一般称为宿主机（Host），宿主机上面的虚拟机称为客户机（Guest）。</p>
<p>那么 Host 是如何将自己的硬件资源虚拟化，并提供给 Guest 使用的呢？<br>这个主要是通过一个叫做 Hypervisor 的程序实现的。</p>
<p>根据 Hypervisor 的实现方式和所处的位置，虚拟化又分为两种：</p>
<ul>
<li>全虚拟化</li>
<li>半虚拟化</li>
</ul>
<p><strong>全虚拟化：</strong><br>  Hypervisor 直接安装在物理机上，多个虚拟机在 Hypervisor 上运行。Hypervisor 实现方式一般是一个特殊定制的 Linux 系统。Xen 和 VMWare 的 ESXi 都属于这个类型</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/aHR0cHM6Ly9pbWcxLnNkbmxhYi5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTgvMDkvMi5qcGc" alt="img"></p>
<p><strong>半虚拟化：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://graph.baidu.com/thumb/v4/3204067461,2092513912.jpg" alt="img"></p>
<p><strong>理论上讲：</strong></p>
<p>全虚拟化一般对硬件虚拟化功能进行了特别优化，性能上比半虚拟化要高；<br>半虚拟化因为基于普通的操作系统，会比较灵活，比如支持虚拟机嵌套。<strong>嵌套意味着可以在 KVM 虚拟机中再运行 KVM。</strong></p>
<h3 id="KVM"><a href="#KVM" class="headerlink" title="KVM"></a>KVM</h3><p>如今大多数云服务器都是使用 KVM 虚拟化。一般KVM 虚拟化的机器，<strong>内存与硬盘超售较难，但是CPU性能可以。</strong></p>
<p>KVM 是Linux下的全功能虚拟化架构，基于 KVM 架构的 VPS，默认是没有系统的，可自己上传 ISO 或调用服务商自带的 ISO 手动安装系统。适合喜欢折腾的用户，拓展性很高。</p>
<p>由于 KVM 架构全功能虚拟化架构，甚至拥有独立的 BIOS 控制，所以对母服务器性能影响较大，所以基于 KVM 的 VPS 较贵，但 KVM VPS 相对其它架构的 VPS 较为自由。</p>
<table>
<thead>
<tr>
<th>项目</th>
<th align="center">Xen</th>
<th align="center">KVM</th>
</tr>
</thead>
<tbody><tr>
<td>问世时间</td>
<td align="center">2003年</td>
<td align="center">2007年</td>
</tr>
<tr>
<td>支持企业</td>
<td align="center">Citrix、Novell、Oracle、Sun、Ret Hat（RHEL5）和Virtual Iron</td>
<td align="center">Redhat、Ubuntu等</td>
</tr>
<tr>
<td>支持的虚拟化技术</td>
<td align="center">全虚拟化、半虚拟化</td>
<td align="center">全虚拟化</td>
</tr>
<tr>
<td>支持架构</td>
<td align="center">x86、IA64和AMD、Fujitsu、IBM、Sun等公司的ARM，以及x86/64 CPU商家和Intel嵌入式的支持</td>
<td align="center">支持虚拟化的CPU</td>
</tr>
<tr>
<td>支持操作系统</td>
<td align="center">UNIX、Linux和Microsoft Windows</td>
<td align="center">UNIX、Linux和Microsoft Windows</td>
</tr>
<tr>
<td>动态迁移</td>
<td align="center">支持</td>
<td align="center">支持（以前不支持）</td>
</tr>
<tr>
<td>内核支持</td>
<td align="center">需要对内核打补丁</td>
<td align="center">内置在内核中</td>
</tr>
</tbody></table>
<h3 id="Xen"><a href="#Xen" class="headerlink" title="Xen"></a>Xen</h3><p>Xen 是基于硬件的完全分割，物理上有多少的资源就只能分配多少资源，因此也很难超售。可分为 Xen-PV（半虚拟化），和 Xen-HVM（全虚拟化）。</p>
<p>Xen是不能超售内存和硬盘的，当母服务器只有16G内存以及100G硬盘时，当开Xen架构（任意一个虚拟化）的1G内存、25G硬盘的子机时，会直接占用服务器1G内存，以及25G硬盘，所以 Xen 的性能，相比 OpenVZ 在超售的情况下要好。</p>
<ul>
<li><p>Xen-PV：半虚拟化，所以它仅仅适用于linux系列VPS，但它的性能损失比较少，大概相对于母机的4%-8%左右。</p>
</li>
<li><p>Xen-HVM：全虚拟化，可以安装windows或自由挂载ISO文件安装任意系统，由于是全虚拟化，所以性能损失较大，大概相对于母机性能损失8%-20%左右。</p>
</li>
</ul>
<h3 id="OpenVZ"><a href="#OpenVZ" class="headerlink" title="OpenVZ"></a>OpenVZ</h3><p>无脑超售，所有的硬件性能都可以超售，而且几乎没有什么成本，包括但不限于内存，硬盘，CPU等。一般在1G内存以下的小机器上见得多。</p>
<p>能不碰就不碰，除非真的很香（指线路），openvz 架构带来的不仅仅有性能差距，更严重的是兼容性问题。毕竟 openvz 还有另外一个特点便是它是直接调用母服务器的内核，所以会导致部分软件无法使用，以及部分内核文件是无法修改。其虚拟化出来的机器资源不是自己独有的，比如安装VPN服务需要注意检测虚拟网卡支持。</p>
<p><strong>所以如果没有硬件功底和折腾的能力，建议避坑。</strong></p>
<h3 id="VMware"><a href="#VMware" class="headerlink" title="VMware"></a>VMware</h3><p>非开源的商业软件，当然其系列产品授权费用也是非常昂贵。所以大部分使用 VMWare 服务商会使用 VMware工作站（VMware Workstation）提供VPS。</p>
<p>使用 VMWare Workstation 虚拟化的 VPS 可以超售，因为其和 OpenVZ 架构一样，子机用多少内存，就扣除系统多少内存，但如果物理内存不足时可能导致母服务器使用 Windows 虚拟内存。</p>
<p><strong>所以如果没有硬件功底和折腾的能力，建议避坑</strong>。</p>
<h3 id="Hyper-V"><a href="#Hyper-V" class="headerlink" title="Hyper-V"></a>Hyper-V</h3><p>印象中除了微软的 Microsoft Azure ，基本都见不到。实话实说我也没用过，先忽略吧。</p>
<h2 id="线路"><a href="#线路" class="headerlink" title="线路"></a>线路</h2><p>线路绝对是买服务器最深的坑之一。本篇幅较长，不想纠结直接跳到结论即可。</p>
<p>（使用国内服务器，且面向国内使用，可以不做了解）</p>
<h3 id="国内线路"><a href="#国内线路" class="headerlink" title="国内线路"></a>国内线路</h3><h4 id="单线："><a href="#单线：" class="headerlink" title="单线："></a>单线：</h4><p><strong>通常指电信单线路或联通单线路或移动单线路（单网卡单IP）。</strong></p>
<p>单线服务器就是指这个IDC机房要么是联通线路接入，要么是电信线路接入，要么就是移动线路接入，相互之间跨运营商访问效果比较差。</p>
<h4 id="双线："><a href="#双线：" class="headerlink" title="双线："></a>双线：</h4><p>通常就是电信+联通双线路(单网卡双IP或双网卡双IP)。</p>
<p>双线服务器是指这个机房是由电信、联通两条线路同时接入的。</p>
<p>这样服务器就拥有了两个IP地址，然后利用路由器技术自动分辨访问者的线路，从而实现电信用户使用电信IP进网站，网通用户使用网通IP访问网站，这是单网卡双IP方式。这样做可以从硬件上解决两种线路互访困难的情况，以此提高网站打开速度。</p>
<p><strong>但如何实现一个域名电信用户访问电信IP? 网通用户访问网通IP地址呢?</strong></p>
<p><strong>域名智能DNS解析双线主机实现，域名泛解析或者对应线路智能解析</strong>。</p>
<p>其原理是用户访问网站时先向DNS服务器查询这个网站的IP地址。而DNS服务器会判断用户是电信上网还是网通上网? 是电信上网 就返回电信IP地址。是网通上网就返回网通IP地址。</p>
<p>双IP双线路实现方式是指在一台服务器上安装两块网卡。分别接入电信网线与网通网线并设置一个网通IP与一个电信IP，这样一台服务器上就有了两个IP地址，需要在服务器上添加网通或电信的路由表来实现网通用户与电信用户分别从不同的线路访问。</p>
<p><strong>双线双IP最显大特点就是速度快，南北互通好：劣势是技术上还不是很成熟，存在不稳定情况。</strong></p>
<h4 id="三线"><a href="#三线" class="headerlink" title="三线"></a>三线</h4><p>通常电信+联通+移动(单网卡三IP)，公网分别通过电信、联通、移动IP地址接入电信、联通、移动上层运营商公用网络，其原理类似于双线单网卡和双IP</p>
<p>这三条线路将手机WiFi融合在一起，移动WiFi的接入率更高，例如，游客使用移动4G访问移动服务器，想想那速度体验是什么样子的？不用说，速度体验无疑会比单线和双线更快。</p>
<h4 id="BGP线路"><a href="#BGP线路" class="headerlink" title="BGP线路"></a>BGP线路</h4><p><strong>采用BGP方案来实现电信/联通/移动 多线路互联的机房，我们称为BGP机房。</strong></p>
<p><strong>BGP(边界网关协议)协议</strong>主要用于互联网AS(自治系统)之间的互联，BGP的最主要功能在于控制路由的传播和选择最好的路由。中国网通与中国电信都具有AS号(自治系统号)，全国各大网络运营商多数都是通过BGP协议与自身的AS号来互联的。</p>
<p>BGP分为两种，一种动态，环路情况下自动切换，是最好的。静态BGP遇到堵塞，需要手动来切换线路。</p>
<p>一般情况下3线3IP好在互不影响，3线单IP好在便宜好多，一般都是自由比例混合，最大化利用资源。</p>
<p>一般情况下动态BGP会贵很多，但是市面上的BGP很多都是静态BGP冒充的，真正的动态BGP很少。如果价格一样，不考虑网卡成本的话，首先看你要达到哪种目的。3网卡的可能你被迫需要把3个的带宽都小一点，但是好在可以保障业务的延续。</p>
<p>3线单IP需要手动切换，如果带宽是自由比例混合的话，就看接入商的服务质量了。会影响访问效果，延续是没有问题的。</p>
<p>如果价格一样，3线单IP的BGP应该是好一点的。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/d26062c08fad4b25bcd005b960c6ed56.jpeg" alt="img"></p>
<h3 id="出海线路"><a href="#出海线路" class="headerlink" title="出海线路"></a>出海线路</h3><p>国内的服务器可以直接忽略此部分。</p>
<h4 id="缩写注释"><a href="#缩写注释" class="headerlink" title="缩写注释"></a>缩写注释</h4><p><strong>CT</strong> China Telecom 中国电信</p>
<p><strong>CU</strong> China Unicom 中国联通</p>
<p><strong>CM</strong> China Mobile 中国移动</p>
<p><strong>CN</strong> China Netcom 中国网通</p>
<p><strong>CMI</strong> China Moblie International 中国移动国际（移动自己的国际出口线路）</p>
<p><strong>Qos</strong> Quality of Service 服务质量等级，等级越高，越是享有优先权，越高的稳定性保障</p>
<p><strong>CMCB</strong> China Moblie Commercial Broadband 中国移动商宽（国际出口高Qos等级特权）</p>
<p><strong>CN2</strong> ChinaNet Next Carrying Network 中国电信第二代承载网</p>
<p><strong>9929</strong> 原网通骨干网 AS9929，现为联通第二大网</p>
<h4 id="亚太地区"><a href="#亚太地区" class="headerlink" title="亚太地区"></a>亚太地区</h4><h5 id="日本"><a href="#日本" class="headerlink" title="日本"></a>日本</h5><p>常见线路：NTT、KDDI、IIJ、SoftBank（软银）、Telstra、PCCW</p>
<p>特殊线路：BGP.NET、CT CN2</p>
<p><strong>NTT（日本）</strong></p>
<p>线路质量：CT 完全没法用，CU CM 看地区看脸，大概率没法用，但是CMCB、CN2 都没问题（CN2到日本除非做特殊优化，否则一律去程绕香港NTT，请悉知）</p>
<p>大部分日本机房最常见的就是NTT线路，其次就是软银和IIJ，最少见的是KDDI，不用想也知道，NTT线路爆炸程度肯定在高峰炸的不轻。事实是，大多数人远远低估了163的汇聚层以及163到日本NTT的劣化情况，在炸的最严重的时候，链路甚至是完全断的（和到日本的海底光缆被捕鱼船整断了一样的效果），目前唯一还能看看的是，上海联通-日本东京NTT（注意不是大阪NTT），其他别说高峰了，低峰都惨不忍睹。</p>
<p>必须澄清的一点是，NTT网络一点都不烂，到亚太其他地区Peer众多，速度自然也是飞快，相反，NTT是亚太地区数一数二的大型ISP，至于为什么大陆到日本NTT的网络质量这么差，一个是NTT并不愿意放低自己的身价，第二个恐怕得问宅男了。</p>
<p>在用日本NTT的线路的VPS商家是一根手指头根本数不过来，光论大厂，Vultr、Linode当然也包括CT AWS回程在内的都是标准的NTT线路。</p>
<p><strong>KDDI</strong></p>
<p>线路质量：CT CU 均优异 CM 未知（估计大概率也不会差的）</p>
<p>KDDI的机器不是完全买不到，而是需要托在日本的朋友代买，大部分卖KDDI的商家对购买者的严格筛选，需要提供详细且真实的日本手机号、身份证、住址等信息，确认后方可开通，但是KDDI线路确实还不错。</p>
<p>对CT来说，不是走北京，就是走广州出口（没上海的份），这就导致江南对KDDI线路的延时并不是特别好看，但是速度高峰绝对不会慢的。CU、CM就不多讲了，体验一下就知道KDDI有多么棒了。（早就不是当年的战五渣了）</p>
<p>点评：大BOSS，只能观赏，可惜买不到，Pass。（可以期待一下腾讯轻量日本地区哦）</p>
<p><strong>IIJ</strong></p>
<p>线路质量：CT CU 高峰Boom（CU没CT那么厉害，速度好歹还是有个50、100Mbps的） CM 看地区，有些地区还是跑的动的。但是！CMCB 飞起来</p>
<p>这货你肯定在当时玩耍某家樱花机房的免费Docker的时候听说过，某知名日本免费空间也是走的IIJ线路哦。IIJ一般常用来解锁日本本地流媒体、游戏，因为没有KDDI那么难买而很受Airport的青睐，价格也相对平民。（说了这么多，就是通常被当作落地或者是解锁机的意思）总体来说，性价比和可玩度都很高，如果你想成为一名高级国际线路Boom玩家，手里也不差钱的话，不妨开一台这线路的玩玩。</p>
<p>点评：落地、解锁机，尴尬时可以临时当正宫使用，价格实惠，绝赞性价比，不二之选。</p>
<p><strong>SoftBank（软银）</strong></p>
<p>线路质量：CT 高峰速度会被Qos的比较厉害 CU 逆天无敌强，绝对是联通到日本最好的线路 CM 还是看地区看脸 CMCB 强无敌，轻松跑满1Gbps</p>
<p>最近这线路也不难买了，很多商家都挂着软银的噱头来卖日本鸡。不想多说什么，都快被商家吹出迫真IPLC的感觉了。</p>
<p>点评：价格较贵，但如果是CU网络，或者是CU中转，想都不用想，上软银没错了，世界加钱可及！</p>
<p><strong>Telstra（日本）</strong></p>
<p>均走香港Telstra到日本，请参见Telstra（香港）</p>
<p><strong>PCCW（日本）</strong></p>
<p>均走香港PCCW到日本，请参见PCCW（香港）</p>
<p><strong>CN2（日本）</strong></p>
<p>不用多说了，电信自家到日本的第二代骨干网，速度和延时肯定不会逊色，但是那个价格真的是比IPLC还要贵，关键是他家的Ctcloud真的不给力，只接了NTT，要是资源是Tesltra、KDDI啥的，还会到新加坡绕一圈，实在是看不下去，推荐还是别给电信天翼云送钱了。</p>
<h5 id="新加坡"><a href="#新加坡" class="headerlink" title="新加坡"></a>新加坡</h5><p>常见线路：NTT、Tata通信、Telstra、PCCW、sg.gs</p>
<p>其他线路：BGP.NET、CN2</p>
<p><strong>NTT</strong></p>
<p>CN2和CM走香港NTT去新加坡，故线路质量参见香港NTT，CT163和CU都绕日本NTT，故线路质量参见日本NTT</p>
<p><strong>Tata通信</strong></p>
<p>线路质量：CT CU 没法用 CM 一般</p>
<p>堪称史上到新加坡延时最高的线路，<strong>环太平洋最佳观光路由</strong>，CT163和CU碰到回程就是新加坡-&gt;日本-&gt;美国-&gt;中国（反之就是去程）</p>
<p><strong>Telstra（新加坡）</strong></p>
<p>线路质量：CT 差劲 CU 速度飞快 CM 满血 CMCB 更是飞快 教育网 极快</p>
<p>教育网到走Telstra的线路速度是非常优异的，有多么优异我想测试过的同学都知道了。CT去程不知为何先绕到日本NTT后再转Telstra，明明回程在香港有就直连了电信，这就导致NTT一炸，这新加坡机器就跟着一起炸，失去了意义。</p>
<p>这里我还是来好好谈谈CU，虽然CU这几年很平庸并且在不可避免地被CT和CM吞噬市场，但是CU的<strong>普宽</strong>出国质量依旧是三网最好的，在这里，上海、广州联通到Telstra均有直连线路，延时略高，但是速度绝对不差。移动走香港CMI转Telstra，体验一如既往的好。</p>
<p>点评：没啥好讲的，一直喊联通牛逼就行了~</p>
<p><strong>PCCW（新加坡）</strong></p>
<p>均走香港PCCW线路到新加坡，详见PCCW（香港）</p>
<p><strong>sg.gs</strong></p>
<p>线路质量：CT CU CM 优异</p>
<p>点评：对大陆网络做了很大优化，默认三网走联通国际线路，当然这家也接了CN2</p>
<p><strong>CN2（新加坡）</strong></p>
<p>如果你还记得套路云国际新手套餐2.0的话，你一定知道CT来回走的是CN2 GIA，虽然只有30Mbps，但是令人惊艳的响应速度实在让人感到舒适。现在腾讯轻量云也正式开放了对新加坡和香港的购买权限。</p>
<h5 id="越南"><a href="#越南" class="headerlink" title="越南"></a>越南</h5><p>常见线路：VNPT</p>
<p>线路质量：CT CU CM 均带不动</p>
<p>越南的VNPT与CT在广东有直连Peer，可惜口子实在是太小了（限速限的只有100KB/S），外加越南到国际线路不佳，除非你在越南有业务，否则买越南的VNPT并不是一个很好的主意。</p>
<h5 id="韩国"><a href="#韩国" class="headerlink" title="韩国"></a>韩国</h5><p>常见线路：KT、SK</p>
<p>其他线路：BGP.NET、CN2</p>
<p><strong>KT 韩国电信 Korea Telecom</strong></p>
<p>线路质量：CT CU CM 三网还算是友好 <strong>9929极佳</strong></p>
<p>韩国的线路其实也并不多，而且韩国到国际都往往会绕香港、日本、美国，价格不菲，除非要玩韩服或者说在韩国有业务，否则一般不考虑韩国的VPS。这里不对韩国的几大常用线路做详细的点评，这不是我们的重点。</p>
<h5 id="香港"><a href="#香港" class="headerlink" title="香港"></a>香港</h5><p>常用线路：PCCW、Telstra、HKBN、HKT、HGC、NTT（香港）、Azure、Google Cloud Platform、Gcorelabs、Tata通信</p>
<p>其他线路：CN2、9929、CUI、CMI香港、BGP.NET等</p>
<p>必须一提的是，香港到大陆由于流量结算费用昂贵，所以一般高峰都会对大陆的流量主动Qos限速，但是上了CN2一般可以缓解大部分的限速问题。</p>
<p><strong>HKBN 香港频宽</strong></p>
<p>线路质量：CT 高峰不行 CU 还不错 CM 不大行 CMCB 起飞</p>
<p>常用于解锁香港原生资源，到国内CT高峰有明显的Qos限速和丢包，CU和CM不成大问题。</p>
<p>由于我很少使用HKBN线路的小鸡，对该线认识不足，期待各位大佬更多的补充。</p>
<p><strong>HKT 香港电讯</strong></p>
<p>线路质量：CT 163高峰还是不行 CU 如果不绕韩国还不错 CM&amp;CMCB 同HKBN</p>
<p>常用于解锁香港原生资源，HKT对于CT来说，该有的Qos一样都不会少，高峰还是得爆炸，CU要注意一下，一部分HKT的IP会使得联通路由到韩国绕一圈再到香港，所以建议买前先找商家要测试IP实测不绕路后再购买，如果是NAT的话就只能等商家换IP了。</p>
<p>点评：HKT 联通用户要注意一下，移动用户走的是CMI香港故请无视绕路问题，但CMI香港大部分移动家宽都是高峰被QOS的很厉害的。</p>
<p><strong>PCCW</strong></p>
<p>线路质量：CT 非高峰也较差，高峰更是爆炸 CU 尚可 CM 能救起来 CMCB 裸跑都能起飞</p>
<p>这家应该不需要我介绍了吧？油管啥的都介绍的泛滥了，但是有点是需要注意的，CT到PCCW一定绕北京再去香港，这就非常无语，晚上延时和速度也并不好看，上了锐速可以爽一会儿，但是很快你就会发现被Qos了，速度一上去就被掐断了链接。</p>
<p>对于CU来说，PCCW的链路还是可以接受的。CM高峰实测使用锐速成功起飞，尽管不够稳定，但是速度的确还说得过去。另外亚太很多地区的路由都是借道香港的PCCW再到达落地的，所以PCCW要承载的流量还是比上面的那几个要大很多。</p>
<p><strong>Telstra</strong></p>
<p>线路质量：CT 高峰尚可 CU 高峰不错 CM 看香港CMI给不给力 CMCB 轻松起飞</p>
<p><strong>GCP/Azure/Gcorelabs 等一些直连机房线路</strong></p>
<p>直连不代表就顺畅，用的人多了一样爆炸，一个活生生的例子就是GCP香港和163接了10G，随着玩GCP的人越来越多，这速度能快到哪里去。Gcorelabs回程优化了一下，走了香港CMI回国，但是CT CU去程日本NTT实在是一块绊脚石。（日本NTT链路对于CT和CU来说有多糟糕，请翻阅NTT日本）</p>
<p><strong>Tata通信</strong></p>
<p>没法用系列，别看着CT香港不绕路直连，但那个丢包和延时实在是没法看，碰到敬而远之就是了。联通更是绕到美国和欧洲去了，这玩啥呢。</p>
<h4 id="欧洲地区"><a href="#欧洲地区" class="headerlink" title="欧洲地区"></a>欧洲地区</h4><h5 id="俄罗斯"><a href="#俄罗斯" class="headerlink" title="俄罗斯"></a>俄罗斯</h5><p>常见线路：RosTelecom（俄罗斯电信）、TTK（俄罗斯铁通）、MTS、Megfon、RETN</p>
<p>特殊线路：莫斯科CN2</p>
<p>如果你听说过过伯力的话，那你一定知道Gcorelabs的伯力小鸡，特别是老伯力KVM-0套餐一直是很多人想要的传家宝，为什么会这么火爆，请听下面讲解。</p>
<p><strong>在伯力、海参崴</strong>这种地方的俄罗斯小鸡，无论是RT还是TTK，对CM都是非常的不友好（绕港是算好的了，大部分绕欧，延时400ms+），建议移动用户放弃购买这块地方的小鸡，或者使用电信、联通中转。</p>
<p><strong>RosTelecom</strong></p>
<p><strong>线路质量：CT 延时漂亮，速度高峰上不去 CU 延时漂亮，速度也还不错 CM 只能说再见了</strong></p>
<p>可能对各位来说，俄罗斯的线路很陌生，或许只知道JustHost的Dataline地区、Adman机房，然后知道是CN2 GT（主机百科居然能把GT说是CN2 GIA，这个必须佩服，吸引小白上钩不折手段），事实你用过以后也一定知道，效果不咋地。</p>
<p>可能在对新西伯利亚adman进行路由测试的时候，你会看到多个 rt.ru 的路由，那就是我们现在要讲的——俄罗斯电信RosTelecom，也是目前俄罗斯最大的ISP。</p>
<p>俄罗斯电信和大陆有一条陆缆，在路由上看就是北京直达俄罗斯的伯力地区，但是中国移动宽带业务发展的很晚，以至于在这个陆缆上，没有它的份额。</p>
<p>电信和联通刮风了这一条陆缆，目前走到伯力这条线联通资源充足，有着得天独厚的优势，电信到伯力也是163骨干中少数能带起来的线路了（虽然这个优势已经变得越来越小）。</p>
<p>点评：联通极佳，上联通中转，走伯力RT的毛子鸡随随便便就能跑起来，甚至不需要BBR。</p>
<p><strong>TTK</strong></p>
<p>线路质量：CT 还真的速度不错 CU 以前真心不错 可惜现在大不如以前了 CM Byebye~</p>
<p>联通可能看到TTK的次数比RT还多，主要还是走TTK比走RT便宜，骨干网晚高峰还是炸的蛮厉害的，远远没有以前那么舒服了，感觉还不如换日本软银？</p>
<p>电信这线路倒是挺少见的，大部分都是走RT线路为主，最近有些商家开始在海参崴卖机器，走的是TTK的线路，我还是比较关注，等他们部署好了我就“厚颜无耻”地去要一台做测试啦。</p>
<p>与RT不同的是，TTK在海参崴和国内2大运营商有Peer（RT是伯力），这就导致了延时的不同，海参崴的机器延时一般比伯力略高，对于CT来说速度不逊于RT。</p>
<p><strong>MTS</strong></p>
<p>线路质量：CT 太慢了 CU 未知 CM 没有直连</p>
<p>CT德国出口似乎很容易就和MTS打满，导致爆炸，高峰能放480p已经是奇迹了。</p>
<p>CM 凭借着de-cix Peer，所以如果de-cix炸了，那么MTS也会跟着一起炸</p>
<p><strong>Megfon</strong></p>
<p>线路质量：CT CU CM 这线路实在太慢了</p>
<p>垃圾一个，用的头大</p>
<h5 id="英国"><a href="#英国" class="headerlink" title="英国"></a>英国</h5><p>常见线路：Telia、Cogentco、Level3、Zayo、Tata通信</p>
<p><strong>Cogentco</strong></p>
<p>线路质量：CT 较好，低峰跑个100Mbps是没啥问题的 CU 大部分绕美 CM 极少部分绕美，基本直连，速度较快</p>
<p>美西Cogentco一直是国内到美国的主动脉，所以这条线路基本天天都会炸，但是实际上CT和欧洲Cogentco的接的口子其实也非常大，但是CT到欧洲主要走Level3和Telia，Cogentco根据我的观察应该是老三了，速度很快不说，只要163汇聚层不炸，都应该可以跑得出速度，如果CT碰到欧洲Cogentco的VPS可以考虑买一台。</p>
<p>Cogentco到CU 9929也是一个非常棒的选择，这个我们等会儿在德国部分细讲。</p>
<p><strong>Telia</strong></p>
<p>线路质量：CT 非高峰无压力 CU 部分直连 Boom CM 带不动 CMCB 起飞</p>
<p>可能Telia在美西见得比较少，欧洲见的比较多（毕竟人家是欧洲ISP嘛），尽管Telia与CT、CU也有非常大的带宽Peer，可惜高峰还是炸的很厉害。</p>
<p>至于CM来讲，没有什么不是加钱办不到的，只要能上高Qos的商宽，速度都能上的去。</p>
<h3 id="未完待续。。。"><a href="#未完待续。。。" class="headerlink" title="未完待续。。。"></a>未完待续。。。</h3><h3 id="线路总结"><a href="#线路总结" class="headerlink" title="线路总结"></a>线路总结</h3><p>不想纠结的话，且主体用户群以国内为主：</p>
<p>国内：BGP &gt; 三线 &gt; 双线 &gt; 单线 （废话，不就是钱吗）</p>
<p>国外（延迟）：香港 = 韩国 ＞亚洲 &gt; 其他</p>
<p>国外（性价比）：美国 &gt;&gt; 其他</p>
<p>线路：CN2 GIA &gt; CN2 GT &gt; 其他</p>
<h1 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h1><p>… …</p>
<p>还有起码一半没写，想起来再更 哈哈哈哈</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">TechFens</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://techfens.com/posts/server_selection.html">https://techfens.com/posts/server_selection.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://techfens.com" target="_blank">TechFen's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%B8%A9%E5%9D%91%E6%97%A5%E8%AE%B0/">踩坑日记</a><a class="post-meta__tags" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/">服务器</a></div><div class="post_share"><div class="social-share" data-image="http://img.techfens.fun/img/asdasfsfsf.jfif" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://fastly.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/wechat.jpg" alt="微信赞赏码"/></a><div class="post-qr-code-desc">微信赞赏码</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/posts/xiaoyuanwang.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20210524123758.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">几种绕过校园网开热点限制的方法</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/hexobug.html" title="Hexo踩坑：文件推送到Github出现的几个BUG"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20210317115033.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-17</div><div class="title">Hexo踩坑：文件推送到Github出现的几个BUG</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20220320231057.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">TechFens</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://t.me/techfens"><i class="fab fa-telegram-plane"></i><span>Telegram Channel</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">我的小破站终于搬迁成功啦!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2"><span class="toc-number">1.</span> <span class="toc-text">写在前面</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%98%8E%E7%A1%AE%E9%9C%80%E6%B1%82"><span class="toc-number">2.</span> <span class="toc-text">明确需求</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.</span> <span class="toc-text">项目类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A7%8D%E7%B1%BB"><span class="toc-number">2.2.</span> <span class="toc-text">云服务器种类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%BB%E9%87%8F%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.2.1.</span> <span class="toc-text">轻量应用服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%8F%E5%85%B8%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.2.2.</span> <span class="toc-text">经典云服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.2.3.</span> <span class="toc-text">弹性伸缩服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NAT%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.2.4.</span> <span class="toc-text">NAT服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E6%97%B6%E8%AE%A1%E8%B4%B9%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.2.5.</span> <span class="toc-text">按时计费服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A3%B8%E9%87%91%E5%B1%9E%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.2.6.</span> <span class="toc-text">裸金属服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GPU%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.2.7.</span> <span class="toc-text">GPU服务器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%80%89%E6%8B%A9"><span class="toc-number">3.</span> <span class="toc-text">配置选择</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#CPU"><span class="toc-number">3.1.</span> <span class="toc-text">CPU</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AD%98"><span class="toc-number">3.2.</span> <span class="toc-text">内存</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E7%9B%98I-O"><span class="toc-number">3.3.</span> <span class="toc-text">硬盘I&#x2F;O</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%A6%E5%AE%BD"><span class="toc-number">3.4.</span> <span class="toc-text">带宽</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E9%98%B2"><span class="toc-number">3.5.</span> <span class="toc-text">高防</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B8%A9%E5%9D%91%E9%9B%B7%E7%82%B9"><span class="toc-number">4.</span> <span class="toc-text">踩坑雷点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%87%E6%A1%88"><span class="toc-number">4.1.</span> <span class="toc-text">备案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E4%B9%A6"><span class="toc-number">4.2.</span> <span class="toc-text">背书</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E6%83%A0"><span class="toc-number">4.3.</span> <span class="toc-text">优惠</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%98%E6%AC%BE"><span class="toc-number">4.4.</span> <span class="toc-text">付款</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%94%AE%E5%90%8E"><span class="toc-number">4.5.</span> <span class="toc-text">售后</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%97%E6%8A%95%E8%AF%89"><span class="toc-number">4.6.</span> <span class="toc-text">抗投诉</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80"><span class="toc-number">4.7.</span> <span class="toc-text">IP地址</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A2%AB%E5%A2%99IP"><span class="toc-number">4.7.1.</span> <span class="toc-text">被墙IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E5%9B%BA%E5%AE%9AIP"><span class="toc-number">4.7.2.</span> <span class="toc-text">非固定IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95IPV6%E5%9C%B0%E5%9D%80"><span class="toc-number">4.7.3.</span> <span class="toc-text">单IPV6地址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F"><span class="toc-number">4.8.</span> <span class="toc-text">系统镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E5%A4%84%E7%90%86"><span class="toc-number">4.9.</span> <span class="toc-text">拥塞处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cubic"><span class="toc-number">4.9.1.</span> <span class="toc-text">Cubic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BBR"><span class="toc-number">4.9.2.</span> <span class="toc-text">BBR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LotServer%EF%BC%88%E9%94%90%E9%80%9F%EF%BC%89"><span class="toc-number">4.9.3.</span> <span class="toc-text">LotServer（锐速）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%8C%96%E6%9E%B6%E6%9E%84"><span class="toc-number">4.10.</span> <span class="toc-text">虚拟化架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#KVM"><span class="toc-number">4.10.1.</span> <span class="toc-text">KVM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Xen"><span class="toc-number">4.10.2.</span> <span class="toc-text">Xen</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OpenVZ"><span class="toc-number">4.10.3.</span> <span class="toc-text">OpenVZ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VMware"><span class="toc-number">4.10.4.</span> <span class="toc-text">VMware</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hyper-V"><span class="toc-number">4.10.5.</span> <span class="toc-text">Hyper-V</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E8%B7%AF"><span class="toc-number">4.11.</span> <span class="toc-text">线路</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BD%E5%86%85%E7%BA%BF%E8%B7%AF"><span class="toc-number">4.11.1.</span> <span class="toc-text">国内线路</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E7%BA%BF%EF%BC%9A"><span class="toc-number">4.11.1.1.</span> <span class="toc-text">单线：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E7%BA%BF%EF%BC%9A"><span class="toc-number">4.11.1.2.</span> <span class="toc-text">双线：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E7%BA%BF"><span class="toc-number">4.11.1.3.</span> <span class="toc-text">三线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BGP%E7%BA%BF%E8%B7%AF"><span class="toc-number">4.11.1.4.</span> <span class="toc-text">BGP线路</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BA%E6%B5%B7%E7%BA%BF%E8%B7%AF"><span class="toc-number">4.11.2.</span> <span class="toc-text">出海线路</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%A9%E5%86%99%E6%B3%A8%E9%87%8A"><span class="toc-number">4.11.2.1.</span> <span class="toc-text">缩写注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%9A%E5%A4%AA%E5%9C%B0%E5%8C%BA"><span class="toc-number">4.11.2.2.</span> <span class="toc-text">亚太地区</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E6%9C%AC"><span class="toc-number">4.11.2.2.1.</span> <span class="toc-text">日本</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B0%E5%8A%A0%E5%9D%A1"><span class="toc-number">4.11.2.2.2.</span> <span class="toc-text">新加坡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B6%8A%E5%8D%97"><span class="toc-number">4.11.2.2.3.</span> <span class="toc-text">越南</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9F%A9%E5%9B%BD"><span class="toc-number">4.11.2.2.4.</span> <span class="toc-text">韩国</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A6%99%E6%B8%AF"><span class="toc-number">4.11.2.2.5.</span> <span class="toc-text">香港</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AC%A7%E6%B4%B2%E5%9C%B0%E5%8C%BA"><span class="toc-number">4.11.2.3.</span> <span class="toc-text">欧洲地区</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%84%E7%BD%97%E6%96%AF"><span class="toc-number">4.11.2.3.1.</span> <span class="toc-text">俄罗斯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8B%B1%E5%9B%BD"><span class="toc-number">4.11.2.3.2.</span> <span class="toc-text">英国</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AA%E5%AE%8C%E5%BE%85%E7%BB%AD%E3%80%82%E3%80%82%E3%80%82"><span class="toc-number">4.11.3.</span> <span class="toc-text">未完待续。。。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E8%B7%AF%E6%80%BB%E7%BB%93"><span class="toc-number">4.11.4.</span> <span class="toc-text">线路总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%AA%E5%AE%8C%E5%BE%85%E7%BB%AD"><span class="toc-number">5.</span> <span class="toc-text">未完待续</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/server_selection.html" title="万字踩坑日记之：国内外个人云服务器挑选指南及避坑"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/asdasfsfsf.jfif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="万字踩坑日记之：国内外个人云服务器挑选指南及避坑"/></a><div class="content"><a class="title" href="/posts/server_selection.html" title="万字踩坑日记之：国内外个人云服务器挑选指南及避坑">万字踩坑日记之：国内外个人云服务器挑选指南及避坑</a><time datetime="2021-09-21T10:55:05.000Z" title="发表于 2021-09-21 18:55:05">2021-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/xiaoyuanwang.html" title="几种绕过校园网开热点限制的方法"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20210524123758.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="几种绕过校园网开热点限制的方法"/></a><div class="content"><a class="title" href="/posts/xiaoyuanwang.html" title="几种绕过校园网开热点限制的方法">几种绕过校园网开热点限制的方法</a><time datetime="2021-05-21T11:52:40.000Z" title="发表于 2021-05-21 19:52:40">2021-05-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/hexobug.html" title="Hexo踩坑：文件推送到Github出现的几个BUG"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20210317115033.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hexo踩坑：文件推送到Github出现的几个BUG"/></a><div class="content"><a class="title" href="/posts/hexobug.html" title="Hexo踩坑：文件推送到Github出现的几个BUG">Hexo踩坑：文件推送到Github出现的几个BUG</a><time datetime="2021-03-17T02:23:03.000Z" title="发表于 2021-03-17 10:23:03">2021-03-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/zuhaophp.html" title="一套让人血压升高的王者荣耀代练/租号/账号交易/皮肤交易/系统源码"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20210321213534.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="一套让人血压升高的王者荣耀代练/租号/账号交易/皮肤交易/系统源码"/></a><div class="content"><a class="title" href="/posts/zuhaophp.html" title="一套让人血压升高的王者荣耀代练/租号/账号交易/皮肤交易/系统源码">一套让人血压升高的王者荣耀代练/租号/账号交易/皮肤交易/系统源码</a><time datetime="2021-03-08T03:17:48.000Z" title="发表于 2021-03-08 11:17:48">2021-03-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/dianlu.html" title="multisim仿真：三种波形产生+放大电路"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.techfens.fun/img/20210303013831.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="multisim仿真：三种波形产生+放大电路"/></a><div class="content"><a class="title" href="/posts/dianlu.html" title="multisim仿真：三种波形产生+放大电路">multisim仿真：三种波形产生+放大电路</a><time datetime="2021-03-02T17:00:48.000Z" title="发表于 2021-03-03 01:00:48">2021-03-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('http://img.techfens.fun/img/20210927121200.png')"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2022 By TechFens</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://techfens.com">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://fastly.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://fastly.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://fastly.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://fastly.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadWaline () {
  function initWaline () {
    const waline = new Waline(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://pl.techfens.com',
      emoji: [
  'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo',
  'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili',
              ],
      avatar: 'robohash',
      path: location.pathname,
      visitor: false,
      dark: '[data-theme="dark"]'
    }, {"placeholder":"终于修复了发表情乱码的bug了，如果可以的话，记得留下你的邮箱，这样可以快速收到回复哦！","pageSize":8,"lang":"zh-CN","requiredFields":["nick","mail"]}))
  }

  if (typeof Waline === 'function') initWaline() 
  else getScript('https://fastly.jsdelivr.net/npm/@waline/client/dist/Waline.min.js').then(initWaline)
}

if ('Waline' === 'Waline' || !true) {
  if (true) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (avatar,mail) => {
    if (avatar) return avatar
    let defaultIcon = '?d=robohash'
    let iconUrl = `https://gravatar.loli.net/avatar/${mail + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const loadWaline = () => {
      Waline.Widget.RecentComments({
        serverURL: 'https://pl.techfens.com',
        count: 6
      }).then(res => {
        const walineArray = res.comments.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': getIcon(e.QQAvatar,e.mail),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('waline-newest-comments', JSON.stringify(walineArray), 10/(60*24))
        generateHtml(walineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
    }

    if (typeof Waline === 'function') loadWaline() 
    else getScript('https://fastly.jsdelivr.net/npm/@waline/client/dist/Waline.min.js').then(loadWaline)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('waline-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer="defer" id="ribbon" src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script src="https://fastly.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener toc scroll 
  window.removeEventListener('scroll', window.tocScrollFn)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":200,"height":400},"mobile":{"show":false},"rect":"opacity:0.7","log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>